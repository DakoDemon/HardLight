# For Frontier events, check /Resources/Prototypes/_NF/Events/events.yml

- type: entityTable
  id: BasicCalmEventsTable
  table: !type:AllSelector # we need to pass a list of rules, since rules have further restrictions to consider via StationEventComp
    children:
    - id: AnomalySpawn
    - id: BluespaceArtifact
    - id: BluespaceLocker
    - id: BreakerFlip
    - id: BureaucraticError
    - id: ClericalError
    - id: CockroachMigration # Sever phobia present in staff # can resprite/rename them later, for now, let's not remove content. 
    - id: GasLeak
    - id: GreytideVirus
    - id: IonStorm # its calm like 90% of the time smh
    - id: KudzuGrowth
    - id: MassHallucinations
    - id: MimicVendorRule
    # - id: MouseMigration
    - id: PowerGridCheck
    - id: RandomSentience
    - id: SlimesSpawn
    - id: SolarFlare
    - id: SnakeSpawn
    - id: SpiderClownSpawn
    - id: SpiderSpawn
    - id: VentClog
    - id: NFBreakerFlip
    - id: NFGasLeak
    - id: NFIonStorm
    - id: NFPowerGridCheck
    - id: NFRandomSentience
    - id: NFSolarFlare
    - id: NFVentClog
    - id: NFBluespaceCargoCrate
    - id: NFBluespaceMcCargoCrate
    - id: NFBluespaceSyndicateCrate
    - id: NFBluespaceBrokenMcDelivery
    - id: NFSmugglingFax

- type: entityTable
  id: BasicAntagEventsTable
  table: !type:AllSelector # we need to pass a list of rules, since rules have further restrictions to consider via StationEventComp
    children:
    - id: ClosetSkeleton
    - id: DragonSpawn
    - id: KingRatMigration
    - id: NinjaSpawn
    - id: ParadoxCloneSpawn
    - id: RevenantSpawn
    - id: SleeperAgents
    - id: ZombieOutbreak
    - id: LoneOpsSpawn
    # - id: DerelictCyborgSpawn
    - id: WizardSpawn

- type: entity
  id: BaseStationEvent
  parent: BaseGameRule
  abstract: true
  components:
  - type: GameRule
    delay:
      min:  10
      max:  20

- type: entity
  id: BaseStationEventShortDelay
  parent: BaseGameRule
  abstract: true
  components:
  - type: GameRule
    delay:
      min:  10
      max:  20

- type: entity
  id: BaseStationEventLongDelay
  parent: BaseGameRule
  abstract: true
  components:
  - type: GameRule
    delay:
      min:  40
      max:  60

- type: entity
  id: AnomalySpawn
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncementColor: "#18abf5"
    startAudio:
      path: /Audio/Announcements/announce.ogg
    weight: 8
    duration: 35
  - type: AnomalySpawnRule

- type: entity
  id: BluespaceArtifact
  parent: BaseStationEventShortDelay
  components:
  - type: GameRule
    delay:
      min:  1
      max:  30
  - type: StationEvent
    startAnnouncementColor: "#18abf5"
    startAudio:
      path: /Audio/Announcements/announce.ogg
    weight: 8
    duration: 35
  - type: BluespaceArtifactRule

- type: entity
  id: BluespaceLocker
  parent: BaseGameRule
  components:
  - type: StationEvent
    weight: 2
    reoccurrenceDelay: 5
    earliestStart: 1
    duration: 1
  - type: BluespaceLockerRule

- type: entity
  id: BreakerFlip
  parent: BaseGameRule
  components:
  - type: StationEvent
    weight: 7
    duration: 1
    minimumPlayers: 1
  - type: BreakerFlipRule

- type: entity
  id: BureaucraticError
  parent: BaseGameRule
  components:
  - type: StationEvent
    startAnnouncement: station-event-bureaucratic-error-announcement
    minimumPlayers: 25
    weight: 3
    duration: 1
  - type: BureaucraticErrorRule
    ignoredJobs:
    - StationAi

- type: entity
  id: ClericalError
  parent: BaseGameRule
  components:
  - type: StationEvent
    startAnnouncement: station-event-clerical-error-announcement
    minimumPlayers: 15
    weight: 5
    duration: 1
  - type: ClericalErrorRule

- type: entity
  parent: BaseGameRule
  id: ClosetSkeleton
  components:
  - type: StationEvent
    weight: 5
    duration: 1
    minimumPlayers: 10
  - type: RandomEntityStorageSpawnRule
    prototype: MobSkeletonCloset

- type: entity
  parent: BaseGameRule
  id: DragonSpawn
  components:
  - type: StationEvent
    weight: 6.5
    earliestStart: 40
    reoccurrenceDelay: 20
    minimumPlayers: 1
    duration: null
  - type: SpaceSpawnRule
    spawnDistance: 0
  - type: AntagSpawner # Frontier
    prototype: MobDragon # Frontier
  - type: DragonRule
  - type: AntagObjectives
    objectives:
    - CarpRiftsObjective
    - DragonSurviveObjective
  - type: AntagSelection
    agentName: dragon-round-end-agent-name
    definitions:
    - spawnerPrototype: SpawnPointGhostDragon
      min: 1
      max: 1
      pickPlayer: false
      mindRoles:
      - MindRoleDragon

- type: entity
  parent: BaseGameRule
  id: NinjaSpawn
  components:
  - type: StationEvent
    weight: 6
    duration: null
    earliestStart: 30
    reoccurrenceDelay: 20
    minimumPlayers: 1
  - type: SpaceSpawnRule
  - type: AntagLoadProfileRule
  - type: AntagObjectives
    objectives:
    - StealResearchObjective
    - DoorjackObjective
    - SpiderChargeObjective
    - TerrorObjective
    - MassArrestObjective
    - NinjaSurviveObjective
  - type: AntagSelection
    agentName: ninja-round-end-agent-name
    definitions:
    - spawnerPrototype: SpawnPointGhostSpaceNinja
      min: 1
      max: 1
      pickPlayer: false
      startingGear: SpaceNinjaGear
      roleLoadout:
      - RoleSurvivalEVA
      briefing:
        text: ninja-role-greeting
        color: Green
        sound: /Audio/Misc/ninja_greeting.ogg
      components:
      - type: SpaceNinja
      - type: NpcFactionMember
        factions:
        - Syndicate
      - type: AutoImplant
        implants:
        - DeathAcidifierImplant
      - type: RandomMetadata
        nameSegments:
        - NamesNinjaTitle
        - NamesNinja
        nameFormat: name-format-ninja
      mindRoles:
      - MindRoleNinja

- type: entity
  parent: BaseGameRule
  id: ParadoxCloneSpawn
  components:
  - type: StationEvent
    weight: 5
    duration: null
    earliestStart: 20
    reoccurrenceDelay: 20
    minimumPlayers: 15
  - type: ParadoxCloneRule
    objectiveBlacklist:
      tags:
      - ParadoxCloneObjectiveBlacklist
  - type: AntagObjectives
    objectives:
    - ParadoxCloneKillObjective
    - ParadoxCloneLivingObjective
  - type: AntagRandomSpawn # TODO: improve spawning so they only start in maints
  - type: AntagSelection
    agentName: paradox-clone-round-end-agent-name
    definitions:
    - spawnerPrototype: SpawnPointGhostParadoxClone
      min: 1
      max: 1
      pickPlayer: false
      startingGear: ParadoxCloneGear
      roleLoadout:
      - RoleSurvivalVoxTank # give vox something to breath in case they don't get a copy
      briefing:
        text: paradox-clone-role-greeting
        color: lightblue
        sound: /Audio/Misc/paradox_clone_greeting.ogg
      mindRoles:
      - MindRoleParadoxClone

- type: entity
  parent: BaseGameRule
  id: RevenantSpawn
  components:
  - type: StationEvent
    weight: 7.5
    duration: 1
    earliestStart: 45
    minimumPlayers: 1
  - type: RandomSpawnRule
    prototype: MobRevenant

- type: entity
  parent: BaseWizardRule
  id: WizardSpawn
  components:
  - type: StationEvent
    weight: 1 # rare
    duration: 1
    earliestStart: 150
    reoccurrenceDelay: 60
    minimumPlayers: 10
  - type: AntagSelection
    agentName: wizard-round-end-name
    definitions:
    - spawnerPrototype: SpawnPointGhostWizard
      min: 1
      max: 1
      playerRatio: 1
      pickPlayer: false
      startingGear: WizardBlueGear
      roleLoadout:
      - RoleSurvivalExtended
      briefing:
        text: wizard-role-greeting
        color: Turquoise
        # TODO: Need Wizard Start sound
        #sound: "/Audio/Ambience/Antag/wizard_start.ogg"
      # TODO: WizardComp as needed
      components:
      - type: NpcFactionMember
        factions:
        - Wizard
      - type: RandomMetadata
        nameSegments:
        - NamesWizardFirst
        - NamesWizardLast
        nameFormat: name-format-wizard
      mindRoles:
      - MindRoleWizard

# disabled until event is rewritten to be more interesting
#- type: entity
#  id: FalseAlarm
#  parent: BaseGameRule
#  components:
#  - type: StationEvent
#    weight: 15
#    duration: 1
#  - type: FalseAlarmRule

- type: entity
  id: GasLeak
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-gas-leak-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    endAnnouncement: station-event-gas-leak-end-announcement
    weight: 8
  - type: GasLeakRule

- type: entity
  id: KudzuGrowth
  parent: BaseStationEventLongDelay
  components:
  - type: StationEvent
    earliestStart: 15
    minimumPlayers: 15
    weight: 7
    duration: 240
  - type: KudzuGrowthRule

- type: entity
  id: PowerGridCheck
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    weight: 5
    startAnnouncement: station-event-power-grid-check-start-announcement
    endAnnouncement: station-event-power-grid-check-end-announcement
    startAudio:
      path: /Audio/Announcements/power_off.ogg
      params:
        volume: -4
    duration: 60
    maxDuration: 120
  - type: PowerGridCheckRule

- type: entity
  parent: BaseGameRule
  id: SolarFlare
  components:
  - type: StationEvent
    weight: 8
    startAnnouncement: station-event-solar-flare-start-announcement
    endAnnouncement: station-event-solar-flare-end-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    duration: 120
    maxDuration: 240
  - type: SolarFlareRule
    onlyJamHeadsets: true
    affectedChannels:
    - Common
    extraChannels:
    - Command
    - Engineering
    - Medical
    - Science
    - Security
    - Service
    - Supply
    extraCount: 2
    lightBreakChancePerSecond: 0.0003
    doorToggleChancePerSecond: 0.001

- type: entity
  id: VentClog
  parent: BaseStationEventLongDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-vent-clog-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    earliestStart: 15
    minimumPlayers: 15
    weight: 5
    duration: 60
  - type: VentClogRule

- type: entity
  id: SlimesSpawn
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-vent-creatures-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    earliestStart: 20
    minimumPlayers: 15
    weight: 5
    duration: 60
  - type: VentCrittersRule
    entries:
    - id: MobAdultSlimesBlueAngry
      prob: 0.02
    - id: MobAdultSlimesGreenAngry
      prob: 0.02
    - id: MobAdultSlimesYellowAngry
      prob: 0.02

- type: entity
  id: SnakeSpawn
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-vent-creatures-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    earliestStart: 20
    minimumPlayers: 15
    weight: 5
    duration: 60
  - type: VentCrittersRule
    entries:
    - id: MobPurpleSnake
      prob: 0.02
    - id: MobSmallPurpleSnake
      prob: 0.02
    - id: MobCobraSpace
      prob: 0.02

- type: entity
  id: SpiderSpawn
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-vent-creatures-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    earliestStart: 20
    minimumPlayers: 15
    weight: 5
    duration: 60
  - type: VentCrittersRule
    entries:
    - id: MobGiantSpiderAngry
      prob: 0.05

- type: entity
  id: SpiderClownSpawn
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-vent-creatures-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    earliestStart: 20
    minimumPlayers: 20
    weight: 1.5
    duration: 60
  - type: VentCrittersRule
    entries:
    - id: MobClownSpider
      prob: 0.05

- type: entity
  id: ZombieOutbreak
  parent: BaseGameRule
  components:
  - type: StationEvent
    earliestStart: 90
    minimumPlayers: 40
    weight: 1 # Zombies was happening basically every single survival round, so now it's super rare
    duration: 1
  - type: ZombieRule
  - type: AntagSelection
    definitions:
    - prefRoles: [ InitialInfected ]
      max: 3
      playerRatio: 10
      blacklist:
        components:
        - ZombieImmune
        - AntagImmune
      briefing:
        text: zombie-patientzero-role-greeting
        color: Plum
        sound: "/Audio/Ambience/Antag/zombie_start.ogg"
      components:
      - type: PendingZombie #less time to prepare than normal
        minInitialInfectedGrace: 300
        maxInitialInfectedGrace: 450
      - type: ZombifyOnDeath
      - type: IncurableZombie
      - type: InitialInfected
      mindRoles:
      - MindRoleInitialInfected

- type: entity
  parent: BaseNukeopsRule
  id: LoneOpsSpawn
  components:
  - type: StationEvent
    earliestStart: 35
    weight: 5.5
    minimumPlayers: 20
    duration: 1
  - type: RuleGrids
  - type: LoadMapRule
    gridPath: /Maps/Shuttles/ShuttleEvent/striker.yml
  - type: NukeopsRule
    roundEndBehavior: Nothing
  - type: AntagSelection
    definitions:
    - spawnerPrototype: SpawnPointLoneNukeOperative
      min: 1
      max: 1
      pickPlayer: false
      startingGear: SyndicateLoneOperativeGearFull
      roleLoadout:
      - RoleSurvivalNukie
      components:
      - type: NukeOperative
      - type: RandomMetadata
        nameSegments:
        - NamesSyndicatePrefix
        - NamesSyndicateNormal
        nameFormat: name-format-nukie-generic
      - type: NpcFactionMember
        factions:
        - Syndicate
      mindRoles:
      - MindRoleNukeops

- type: entity
  parent: BaseTraitorRule
  id: SleeperAgents
  components:
  - type: StationEvent
    earliestStart: 30
    weight: 8
    minimumPlayers: 15
    maxOccurrences: 1 # can only happen once per round
    startAnnouncement: station-event-communication-interception
    startAudio:
      path: /Audio/Announcements/intercept.ogg
    duration: null # the rule has to last the whole round not 1 second
    occursDuringRoundEnd: false
  - type: AlertLevelInterceptionRule
  - type: AntagSelection
    definitions:
    - prefRoles: [ TraitorSleeper ]
      fallbackRoles: [ Traitor ]
      min: 1
      max: 2
      playerRatio: 10
      blacklist:
        components:
        - AntagImmune
      mindRoles:
      - MindRoleTraitorSleeper

- type: entity
  id: MassHallucinations
  parent: BaseGameRule
  components:
  - type: StationEvent
    weight: 7
    duration: 150
    maxDuration: 300
    reoccurrenceDelay: 30
  - type: MassHallucinationsRule
    minTimeBetweenIncidents: 0.1
    maxTimeBetweenIncidents: 300
    maxSoundDistance: 7
    sounds:
      collection: Paracusia

- type: entity
  parent: BaseGameRule
  id: IonStorm
  components:
  - type: StationEvent
    weight: 8
    reoccurrenceDelay: 20
    duration: 1
  - type: IonStormRule

- type: entity
  id: MimicVendorRule
  parent: BaseGameRule
  components:
  - type: StationEvent
    earliestStart: 0
    minimumPlayers: 20
    maxOccurrences: 1 # this event has diminishing returns on interesting-ness, so we cap it
    weight: 5
  - type: MobReplacementRule

- type: entity
  id: GreytideVirus
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAudio:
      path: /Audio/Announcements/attention.ogg
    weight: 5
    minimumPlayers: 25
    reoccurrenceDelay: 20
  - type: GreytideVirusRule
    accessGroups:
    - Cargo
    - Command
    - Engineering
    - Research
    - Security
    - Service
    blacklist:
    - External # don't space everything

- type: entity
  parent: BaseGameRule
  id: SmugglerStashVariationPass
  components:
  - type: StationEvent
    earliestStart: 0
    duration: 1
    minimumPlayers: 1
    maxOccurrences: 2
    weight: 10
  - type: RandomSpawnRule
    prototype: RandomSatchelSpawner

# - type: entity
  # parent: BaseGameRule
  # id: DerelictCyborgSpawn
  # components:
  # - type: StationEvent
    # weight: 5
    # earliestStart: 15
    # reoccurrenceDelay: 20
    # minimumPlayers: 4
    # duration: null
  # - type: SpaceSpawnRule
    # spawnDistance: 0
  # - type: AntagSpawner
    # prototype: PlayerBorgDerelict
  # - type: AntagSelection
    # definitions:
    # - spawnerPrototype: SpawnPointGhostDerelictCyborg
      # min: 1
      # max: 1
      # pickPlayer: false

- type: entityTable
  id: NFBasicCalmEventsTable
  table: !type:AllSelector # we need to pass a list of rules, since rules have further restrictions to consider via StationEventComp
    children:
    - id: NFBreakerFlip
    - id: NFGasLeak
    - id: NFIonStorm
    - id: NFPowerGridCheck
    - id: NFRandomSentience
    - id: NFSolarFlare
    - id: NFVentClog
    - id: NFBluespaceCargoCrate
    - id: NFBluespaceMcCargoCrate
    - id: NFBluespaceSyndicateCrate
    - id: NFBluespaceBrokenMcDelivery
    - id: NFSmugglingFax

- type: entity
  id: NFBreakerFlip
  parent: BaseGameRule
  components:
  - type: StationEvent
    weight: 7
    earliestStart: 15 # Frontier
    duration: 1
    minimumPlayers: 15
  - type: BreakerFlipRule

- type: entity
  id: NFGasLeak
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-gas-leak-nf-start-announcement # Frontier: add nf-
    startAudio:
      path: /Audio/Announcements/attention.ogg
    endAnnouncement: station-event-gas-leak-nf-end-announcement # Frontier: add nf-
    weight: 8
    earliestStart: 15 # Frontier
  - type: GasLeakRule

- type: entity
  id: NFPowerGridCheck
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    weight: 5
    earliestStart: 15 # Frontier
    startAnnouncement: station-event-power-grid-check-nf-start-announcement # Frontier: add nf-
    endAnnouncement: station-event-power-grid-check-nf-end-announcement # Frontier: add nf-
    startAudio:
      path: /Audio/Announcements/power_off.ogg
      params:
        volume: -4
    duration: 60
    maxDuration: 120
  - type: PowerGridCheckRule

- type: entity
  parent: BaseGameRule
  id: NFSolarFlare
  components:
  - type: StationEvent
    weight: 4
    earliestStart: 15
    reoccurrenceDelay: 45
    startAnnouncement: station-event-solar-flare-nf-start-announcement
    endAnnouncement: station-event-solar-flare-nf-end-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    duration: 120
    maxDuration: 240
  - type: SolarFlareRule
    allChannels: true
    lightBreakChancePerSecond: 0.0003
    doorToggleChancePerSecond: 0.001

- type: entity
  id: NFVentClog
  parent: BaseStationEventLongDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-vent-clog-nf-start-announcement # Frontier: add nf-
    startAudio:
      path: /Audio/Announcements/attention.ogg
    earliestStart: 15
    minimumPlayers: 15
    weight: 5
    duration: 60
  - type: VentClogRule

- type: entity
  parent: BaseGameRule
  id: NFIonStorm
  components:
  - type: StationEvent
    earliestStart: 15 # Frontier
    weight: 8
    reoccurrenceDelay: 120 # Frontier: 20<120
    duration: 1
  - type: IonStormRule

- type: entity
  id: NFBaseStationEventModerateDelay
  parent: BaseGameRule
  abstract: true
  components:
    - type: GameRule
      delay:
        min:  30
        max:  40

- type: entity
  id: NFBluespaceCargoCrate
  parent: NFBaseStationEventModerateDelay
  components:
  - type: StationEvent
    startAnnouncement: bluespace-cargo-event-announcement
    weight: 5
    duration: 35
    reoccurrenceDelay: 120
  - type: BluespaceCargoRule
    spawnerPrototype: RandomCargoSpawner
    flashPrototype: EffectFlashBluespaceQuiet
    requireSafeAtmosphere: true
    minimumSpawns: 2
    maximumSpawns: 5

- type: entity
  id: NFBluespaceMcCargoCrate
  parent: NFBaseStationEventModerateDelay
  components:
  - type: StationEvent
    startAnnouncement: bluespace-cargo-event-announcement
    earliestStart: 20
    weight: 5
    duration: 35
    maximumPlayers: 20
    reoccurrenceDelay: 180
  - type: BluespaceCargoRule
    spawnerPrototype: CrateFoodMcCargo
    flashPrototype: EffectFlashMcBluespace
    requireSafeAtmosphere: true

- type: entity
  id: NFBluespaceSyndicateCrate
  parent: NFBaseStationEventModerateDelay
  components:
  - type: StationEvent
    startAnnouncement: bluespace-syndicate-crate-event-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    weight: 1
    duration: 35
    earliestStart: 90
    minimumPlayers: 1 # Floof - we ball
    reoccurrenceDelay: 480 # 8 hours
  - type: BluespaceCargoRule
    spawnerPrototype: CrateSyndicateSurplusBundle
    maximumSpawns: 1

- type: entity
  id: NFSmugglingFax
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    weight: 8 # Fairly common.
    duration: 35
    earliestStart: 30
    minimumPlayers: 1 # Floof - we ball
    reoccurrenceDelay: 50
  - type: RandomFaxRule
    minFaxes: 1
    maxFaxes: 2
    name: deaddrop-faxed-hint-name
    prototypeId: PaperDeadDropFax
    content: deaddrop-faxed-hint-content # Default contents, will be edited.
    stampedBy:
    - stampedName: deaddrop-faxed-hint-signature
      stampedColor: "#850000"
    stampState: paper_stamp-syndicate
    preFaxActions:
    - !type:GetRandomDeadDropAction

- type: entity
  id: NFSmugglingFaxBig
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    weight: 100 # Fairly common.
    minimumPlayers: 1 # Floof - we ball
    duration: 35
  - type: RandomFaxRule
    minFaxes: 3
    maxFaxes: 4
    name: deaddrop-faxed-hint-name
    prototypeId: PaperDeadDropFax
    content: deaddrop-faxed-hint-content # Default contents, will be edited.
    stampedBy:
    - stampedName: deaddrop-faxed-hint-signature
      stampedColor: "#850000"
    stampState: paper_stamp-syndicate
    preFaxActions:
    - !type:GetRandomDeadDropAction

- type: entity
  id: BluespaceSalvage
  parent: BaseStationEventShortDelay
  name: NT Bluespace Monitoring # This name shows up in the radio messages.
  categories: [ HideSpawnMenu ]
  components:
  - type: StationEvent
    startRadioAnnouncement: station-event-bluespace-scrap-start-announcement
    startRadioAnnouncementChannel: Engineering
    warningRadioAnnouncement: station-event-bluespace-scrap-warning-announcement
    warningRadioAnnouncementChannel: Engineering
    endRadioAnnouncement: station-event-bluespace-scrap-end-announcement
    endRadioAnnouncementChannel: Engineering
    weight: 5
    duration: 1800 # 30 minutes
    maxDuration: 1800 # 30 minutes
  - type: BluespaceErrorRule
    groups:
      grid: !type:GridSpawnGroup
        nameDataset: NamesScrap
        nameDatasetType: Nanotrasen # they're shuttles
        minCount: 2
        maxCount: 3
        minimumDistance: 1000
        maximumDistance: 2000
        addComponents:
        - type: IFF
          color: "#AAAAAA"
        - type: LinkedLifecycleGridParent
        - type: ProtectedGrid
          preventArtifactTriggers: true
        - type: PreventPilot
        paths:
#        - /Maps/_NF/Shuttles/Scrap/canister.yml # Too small
        - /Maps/_NF/Shuttles/Scrap/disciple.yml
        - /Maps/_NF/Shuttles/Scrap/nugget.yml
        - /Maps/_NF/Shuttles/Scrap/orange.yml
        - /Maps/_NF/Shuttles/Scrap/point.yml
        - /Maps/_NF/Shuttles/Scrap/tide.yml
        - /Maps/_NF/Shuttles/Scrap/scrap-investigator.yml # Please replace all this maps ones we finish some automated system
        - /Maps/_NF/Shuttles/Scrap/scrap-hauler.yml
        - /Maps/_NF/Shuttles/Scrap/scrap-crescent.yml
        - /Maps/_NF/Shuttles/Scrap/scrap-barge.yml
        - /Maps/_NF/Shuttles/Scrap/scrap-courserx.yml
        - /Maps/_NF/Shuttles/Scrap/scrap-comet.yml
        - /Maps/_NF/Shuttles/Scrap/scrap-sprinter.yml
  - type: ActiveRadio
    channels:
    - Engineering

- type: entity
  id: BluespaceCacheError
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-bluespace-cache-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    warningAnnouncement: station-event-bluespace-cache-warning-announcement
    endAnnouncement: station-event-bluespace-cache-end-announcement
    earliestStart: 100
    weight: 5
    duration: 1350
    maxDuration: 1560
    reoccurrenceDelay: 360 # 6 hours
    requiredJobs:
      Sheriff: 1
  - type: BluespaceErrorRule
    groups:
      grid: !type:GridSpawnGroup
        nameLoc:
        - station-event-bluespace-name-SyndicateWeaponsCache
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents:
        - type: Gravity
          enabled: true
          inherent: true
        - type: IFF
          color: "#E10F9B"
        - type: Shuttle
        - type: LinkedLifecycleGridParent
        - type: ProtectedGrid
          preventArtifactTriggers: true
        - type: PreventPilot
        - type: ForceAnchor # Added post-FTL, so anchoring is fine.
        paths:
        - /Maps/_NF/Bluespace/cache.yml
    rewardAccounts:
      Nfsd: 1.0

- type: entity
  id: BluespaceVaultError
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-bluespace-vault-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    warningAnnouncement: station-event-bluespace-vault-warning-announcement
    endAnnouncement: station-event-bluespace-vault-end-announcement
    earliestStart: 100
    weight: 5
    duration: 1020
    maxDuration: 1350
    reoccurrenceDelay: 360 # 6 hours
    requiredJobs:
      Sheriff: 1
  - type: BluespaceErrorRule
    groups:
      grid: !type:GridSpawnGroup
        nameLoc:
        - station-event-bluespace-name-SecureNTVault
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents:
        - type: Gravity
          enabled: true
          inherent: true
        - type: IFF
          color: "#E10F9B"
        - type: LinkedLifecycleGridParent
        - type: ProtectedGrid
          preventArtifactTriggers: true
        - type: PreventPilot
        - type: ForceAnchor
        paths:
        - /Maps/_NF/Bluespace/vault.yml
    rewardAccounts:
      Nfsd: 1.0

- type: entity
  id: BluespaceVaultSmallError
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-bluespace-vault-start-announcement
    startAudio:
      path: /Audio/Announcements/attention.ogg
    warningAnnouncement: station-event-bluespace-vault-warning-announcement
    endAnnouncement: station-event-bluespace-vault-end-announcement
    earliestStart: 100
    maximumPlayers: 30
    weight: 5
    duration: 590
    maxDuration: 780
    reoccurrenceDelay: 360 # 6 hours
    requiredJobs:
      Sheriff: 1
  - type: BluespaceErrorRule
    groups:
      grid: !type:GridSpawnGroup
        nameLoc:
        - station-event-bluespace-name-SecureNTVault
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents:
        - type: Gravity
          enabled: true
          inherent: true
        - type: IFF
          color: "#E10F9B"
        - type: LinkedLifecycleGridParent
        - type: ProtectedGrid
          preventArtifactTriggers: true
        - type: PreventPilot
        - type: ForceAnchor
        paths:
        - /Maps/_NF/Bluespace/vaultsmall.yml
    rewardAccounts:
      Nfsd: 1.0

- type: entity
  id: BluespaceSyndicateFTLInterception
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-bluespace-generic-ftl-start-announcement
    startAudio:
      path: /Audio/Misc/notice1.ogg
    warningAnnouncement: station-event-bluespace-generic-ftl-warning-announcement
    endAnnouncement: station-event-bluespace-generic-ftl-end-announcement
    earliestStart: 80
    minimumPlayers: 15
    weight: 1
    duration: 1800
    maxDuration: 2400
    reoccurrenceDelay: 360 # 6 hours
  - type: BluespaceErrorRule
    groups:
      grid: !type:GridSpawnGroup
        nameLoc:
        - station-event-bluespace-name-UnidentifiedVessel
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents:
        - type: Gravity
          enabled: true
          inherent: true
        - type: IFF
          color: "#E10F9B"
        - type: LinkedLifecycleGridParent
        - type: ProtectedGrid
          preventArtifactTriggers: true
        - type: PreventPilot
        - type: ForceAnchor
        paths:
        - /Maps/_NF/Bluespace/syndieftlintercept.yml

- type: entity
  id: BluespaceWizardFederationScout
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-bluespace-generic-ftl-start-announcement
    startAudio:
      path: /Audio/Misc/notice1.ogg
    warningAnnouncement: station-event-bluespace-generic-ftl-warning-announcement
    endAnnouncement: station-event-bluespace-generic-ftl-end-announcement
    earliestStart: 100
    minimumPlayers: 15
    weight: 1
    duration: 900
    maxDuration: 1200
    reoccurrenceDelay: 360 # 6 hours
  - type: BluespaceErrorRule
    groups:
      grid: !type:GridSpawnGroup
        nameLoc:
        - station-event-bluespace-name-UnidentifiedVessel
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents:
        - type: Gravity
          enabled: true
          inherent: true
        - type: IFF
          color: "#E10F9B"
        - type: LinkedLifecycleGridParent
        - type: ProtectedGrid
          preventArtifactTriggers: true
        - type: PreventPilot
        - type: ForceAnchor
        paths:
        - /Maps/_NF/Bluespace/wizardprobealt.yml

- type: entity
  id: BluespaceBloodMoon
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-bluespace-generic-ftl-start-announcement
    startAudio:
      path: /Audio/Misc/notice1.ogg
    warningAnnouncement: station-event-bluespace-generic-ftl-warning-announcement
    endAnnouncement: station-event-bluespace-generic-ftl-end-announcement
    earliestStart: 80
    minimumPlayers: 15
    weight: 1
    duration: 1800
    maxDuration: 2400
    reoccurrenceDelay: 360 # 6 hours
  - type: BluespaceErrorRule
    groups:
      grid: !type:GridSpawnGroup
        nameLoc:
        - station-event-bluespace-name-UnidentifiedVessel
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents:
        - type: Gravity
          enabled: true
          inherent: true
        - type: IFF
          color: "#E10F9B"
        - type: LinkedLifecycleGridParent
        - type: ProtectedGrid
          preventArtifactTriggers: true
        - type: PreventPilot
        - type: ForceAnchor
        paths:
        - /Maps/_NF/Bluespace/bloodmoon.yml

- type: entity
  id: BluespaceCave
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-bluespace-generic-ftl-start-announcement
    startAudio:
      path: /Audio/Misc/notice1.ogg
    warningAnnouncement: station-event-bluespace-generic-ftl-warning-announcement
    endAnnouncement: station-event-bluespace-generic-ftl-end-announcement
    earliestStart: 20
    weight: 1
    duration: 1800
    maxDuration: 2400
    maxOccurrences: 1
  - type: BluespaceErrorRule
    groups:
      grid: !type:GridSpawnGroup
        nameLoc:
        - station-event-bluespace-name-Cave
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents:
        - type: Gravity
          enabled: true
          inherent: true
        - type: IFF
        - type: LinkedLifecycleGridParent
        - type: ProtectedGrid
          preventArtifactTriggers: true
        - type: PreventPilot
        - type: ForceAnchor
        paths:
        - /Maps/_NF/Bluespace/cave.yml

- type: entity
  id: NFBluespaceBrokenMcDelivery
  parent: BaseStationEventShortDelay
  components:
  - type: StationEvent
    startAnnouncement: station-event-bluespace-generic-ftl-start-announcement
    startAudio:
      path: /Audio/Misc/notice1.ogg
    warningAnnouncement: station-event-bluespace-generic-ftl-warning-announcement
    endAnnouncement: station-event-bluespace-generic-ftl-end-announcement
    earliestStart: 20
    maximumPlayers: 5
    weight: 5
    duration: 900
    maxDuration: 1800
    reoccurrenceDelay: 240 # once per 4 hours
  - type: BluespaceErrorRule
    groups:
      grid: !type:GridSpawnGroup
        nameLoc:
        - station-event-bluespace-name-BrokenMcDelivery
        minCount: 2
        maxCount: 3
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents:
        - type: IFF
        - type: LinkedLifecycleGridParent
        - type: ProtectedGrid
          preventArtifactTriggers: true
        - type: PreventPilot
        paths:
        - /Maps/_NF/Bluespace/mcevent.yml

- type: entity
  id: BluespaceDungeonBase
  parent: BaseStationEventShortDelay
  name: NT Bluespace Monitoring # This name shows up in the radio messages.
  abstract: true
  components:
  - type: StationEvent
    startRadioAnnouncement: station-event-bluespace-dungeon-start-announcement
    startRadioAnnouncementChannel: Supply
    warningRadioAnnouncement: station-event-bluespace-dungeon-warning-announcement
    warningRadioAnnouncementChannel: Supply
    endRadioAnnouncement: station-event-bluespace-dungeon-end-announcement
    endRadioAnnouncementChannel: Supply
    weight: 5
    duration: 1800 # 30 minutes
    maxDuration: 1800 # 30 minutes
    reoccurrenceDelay: 120 # 2 hours (some variety - at worst, alternates between four dungeon types)
  - type: ActiveRadio
    channels:
    - Supply

- type: entity
  id: BluespaceDungeonBasalt
  parent: BluespaceDungeonBase
  categories: [ HideSpawnMenu ]
  components:
  - type: BluespaceErrorRule
    groups:
      vgroid: !type:DungeonSpawnGroup
        nameDataset: NamesBorer
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents: &dungeonComponents
        - type: Gravity
          enabled: true
          inherent: true
        - type: IFF
        - type: LinkedLifecycleGridParent
        - type: ProtectedGrid
          preventArtifactTriggers: true
        - type: PreventPilot
        # FIXME: the dungeon dosen't pass FTL events even though it should FTL in
        #        and we don't get a MapInitEvent, so this just forces static physics
        - type: Physics
          bodyType: Static
          bodyStatus: OnGround
        protos:
        - NFVGRoidBasalt

- type: entity
  id: BluespaceDungeonSnow
  parent: BluespaceDungeonBase
  categories: [ HideSpawnMenu ]
  components:
  - type: BluespaceErrorRule
    groups:
      vgroid: !type:DungeonSpawnGroup
        nameDataset: NamesBorer
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents: *dungeonComponents
        protos:
        - NFVGRoidSnow

- type: entity
  id: BluespaceDungeonCave
  parent: BluespaceDungeonBase
  categories: [ HideSpawnMenu ]
  components:
  - type: BluespaceErrorRule
    groups:
      vgroid: !type:DungeonSpawnGroup
        nameDataset: NamesBorer
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents: *dungeonComponents
        protos:
        - NFVGRoidCave

- type: entity
  id: BluespaceDungeonChromite
  parent: BluespaceDungeonBase
  categories: [ HideSpawnMenu ]
  components:
  - type: BluespaceErrorRule
    groups:
      vgroid: !type:DungeonSpawnGroup
        nameDataset: NamesBorer
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents: *dungeonComponents
        protos:
        - NFVGRoidChromite

- type: entity
  id: BluespaceDungeonScrap
  parent: BluespaceDungeonBase
  categories: [ HideSpawnMenu ]
  components:
  - type: BluespaceErrorRule
    groups:
      vgroid: !type:DungeonSpawnGroup
        nameDataset: NamesBorer
        minimumDistance: 1500
        maximumDistance: 2500
        addComponents: *dungeonComponents
        protos:
        - NFVGRoidScrap
